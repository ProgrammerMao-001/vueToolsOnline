"use strict";(self["webpackChunkvuetools"]=self["webpackChunkvuetools"]||[]).push([[893],{73893:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var a=function(){var e=this,t=e._self._c;return t("div",[t("backHomeBtn",[[t("el-input",{staticStyle:{width:"60%"},attrs:{disabled:"",placeholder:""},model:{value:e.formData.managementLine,callback:function(t){e.$set(e.formData,"managementLine",t)},expression:"formData.managementLine"}},[t("template",{slot:"append"},[t("div",{staticClass:"choose-class",on:{click:e.showChooseLine}},[t("i",{staticClass:"el-icon-bank-card"}),e._v(" "),t("span",[e._v("选择")])])])],2),t("div",[e._v("lineArr："+e._s(e.formData.lineId))])]],2),t("chooseLine",{ref:"chooseLine",on:{"on-response":e.getLineArr}})],1)},l=[],n=(i(57658),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"900px",title:e.title,visible:e.dialogVisible,"before-close":e.hideDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dialogBox"},[t("div",{staticClass:"dialog-left"},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("路线清单")]),t("div",{staticClass:"dialog-left-table"},[t("div",{staticClass:"dialog-left-table-search"},[t("el-input",{attrs:{placeholder:"输入路线名称"},model:{value:e.formData.lineName,callback:function(t){e.$set(e.formData,"lineName",t)},expression:"formData.lineName"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getTableData}},[e._v(" 查询 ")])],1),t("el-table",{ref:"singleTable",staticStyle:{width:"100%","overflow-y":"auto"},attrs:{"highlight-current-row":"",border:"",data:e.tableData,height:e.tableDataHeight,"row-class-name":e.getRowClassName,"show-overflow-tooltip":""},on:{"row-click":e.selectBorderData}},[t("el-table-column",{attrs:{label:"序号",type:"index"}}),t("el-table-column",{attrs:{label:"路线名称","show-overflow-tooltip":"",align:"center",prop:"lineName"}}),t("el-table-column",{attrs:{label:"起点名称","show-overflow-tooltip":"",align:"center",prop:"originName"}}),t("el-table-column",{attrs:{label:"终点名称","show-overflow-tooltip":"",align:"center",prop:"terminusName"}})],1)],1)],1),t("div",{staticClass:"dialog-right"},[t("el-divider",{attrs:{"content-position":"left"}},[e._v("已选路线")]),t("div",{staticClass:"dialog-right-option"},e._l(e.lineArr,(function(i,a){return t("el-tag",{key:i.id,attrs:{closable:""},on:{close:function(t){return e.handleClose(a)}}},[t("div",{staticClass:"dialog-right-option-tag",attrs:{title:i.lineName}},[e._v(" "+e._s(i.lineName)+" ")])])})),1)],1)]),t("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.hideDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)])}),o=[];function r(e){let t,i=e.constructor===Array?[]:{};if("object"===typeof e){if(window.JSON)t=JSON.stringify(e),i=JSON.parse(t);else for(const t in e)i[t]="object"===typeof e[t]?r(e[t]):e[t];return i}}var s={name:"chooseLine",components:{},props:{},data(){return{title:"",dialogVisible:!1,tableData:[],lineArr:[],tableDataHeight:400,formData:{},tableDataIdArr:[]}},methods:{hideDialog(){this.dialogVisible=!1,this.tableData.forEach(((e,t)=>{e.highlight=!1}))},showDialog(e){setTimeout((()=>{let e=document.querySelector(".dialog-right-option"),t=document.querySelector(".dialog-left-table-search");this.tableDataHeight=e.clientHeight-t.clientHeight-40}),200),this.dialogVisible=!0,this.title=e.title,e.data&&(this.lineArr=e.data),this.getTableData(e)},selectBorderData(e){let t=this.tableDataIdArr.indexOf(e.id);-1!==t&&(this.tableData[t].highlight=!0),-1===this.lineArr.findIndex((t=>t.id===e.id))?this.lineArr.push({id:e.id,lineName:e.lineName}):this.$message.warning("已选择该线路！")},handleClose(e){let t=this.tableDataIdArr.indexOf(this.lineArr[e].id);if(-1!==t){let e=r(this.tableData);this.$set(e[t],"highlight",!1),this.tableData=e,this.$forceUpdate()}this.lineArr.splice(e,1)},submitForm(){0===this.lineArr.length||this.lineArr===[]?this.$message.error("请先选择线路！"):(this.$emit("on-response",this.lineArr),this.lineArr=[],this.hideDialog())},getTableData(e){if(this.tableData=i(64e3).a,0!==e.data.length){let t=[];e.data.forEach((e=>t.push(e.id))),this.tableData.forEach(((e,i)=>{e.highlight=!0===t.includes(e.id)}))}this.tableData.forEach(((e,t)=>{this.tableDataIdArr.push(e.id)}))},getRowClassName({row:e}){return e.highlight?"highlight-row":""}},created(){},mounted(){}},m=s,h=i(1001),d=(0,h.Z)(m,n,o,!1,null,"1e7a2b42",null),c=d.exports,g={name:"tableAndTag",components:{chooseLine:c},props:{},data(){return{formData:{},lineArr:[]}},methods:{showChooseLine(){let e={title:"管理线路",data:this.lineArr};this.$refs.chooseLine.showDialog(e)},getLineArr(e){this.lineArr=e,console.log(e,this.lineArr),this.formData.lineId=JSON.stringify(e);let t=[];this.lineArr.forEach(((e,i)=>{t.push(e.lineName)})),console.log(t.toString()),this.$set(this.formData,"managementLine",t.toString())}},created(){},mounted(){}},u=g,N=(0,h.Z)(u,a,l,!1,null,"6017b242",null),f=N.exports},64e3:function(e){e.exports=JSON.parse('{"a":[{"id":"1","lineName":"葫芦岛","originName":"葫芦","terminusName":"岛"},{"id":"2","lineName":"北京","originName":"北","terminusName":"京"},{"id":"3","lineName":"上海","originName":"上","terminusName":"海"},{"id":"4","lineName":"杭州","originName":"杭","terminusName":"州"},{"id":"5","lineName":"长沙","originName":"长","terminusName":"沙"},{"id":"6","lineName":"重庆","originName":"重庆","terminusName":"庆"},{"id":"7","lineName":"广东","originName":"广","terminusName":"东"},{"id":"8","lineName":"湖北","originName":"湖","terminusName":"北"},{"id":"9","lineName":"河南","originName":"河","terminusName":"南"},{"id":"10","lineName":"衢州","originName":"衢","terminusName":"州"},{"id":"11","lineName":"西宁","originName":"西","terminusName":"宁"},{"id":"12","lineName":"千岛湖","originName":"千岛","terminusName":"湖"},{"id":"13","lineName":"湖州","originName":"湖","terminusName":"州"},{"id":"14","lineName":"辽宁","originName":"辽","terminusName":"宁"},{"id":"15","lineName":"唐山","originName":"唐","terminusName":"山"},{"id":"16","lineName":"四川","originName":"四","terminusName":"川"},{"id":"17","lineName":"成都","originName":"成","terminusName":"都"},{"id":"18","lineName":"西藏","originName":"西","terminusName":"藏"}]}')}}]);
//# sourceMappingURL=893.7d9ebdd5.js.map