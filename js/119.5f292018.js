"use strict";(self["webpackChunkvuetools"]=self["webpackChunkvuetools"]||[]).push([[119],{2119:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",[e("backHomeBtn",[[e("div",{staticClass:"div"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onExport}},[t._v("导出jpg")]),e("div",{ref:"imageWrapper",staticClass:"imageWrapper"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.controlsRecord}},[e("el-table-column",{attrs:{prop:"controlsId",label:"controlsId"}}),e("el-table-column",{attrs:{prop:"controlsType",label:"controlsType"}}),e("el-table-column",{attrs:{prop:"id",label:"id"}}),e("el-table-column",{attrs:{prop:"title",label:"title"}})],1),e("div",{staticStyle:{margin:"30px 0"}},[t._v("table")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.safetyMeasureRecord}},[e("el-table-column",{attrs:{prop:"id",label:"annex"}}),e("el-table-column",{attrs:{prop:"content",label:"content"}}),e("el-table-column",{attrs:{prop:"passFlag",label:"passFlag"}}),e("el-table-column",{attrs:{prop:"safetyMeasureId",label:"safetyMeasureId"}})],1),e("div",{staticClass:"img-box"},[e("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.imgUrl,"preview-src-list":[t.imgUrl]}}),e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:a(632),alt:""}}),t._l(t.imageList,(function(t,a){return e("el-image",{key:a,staticStyle:{width:"100px",height:"100px","margin-left":"6px"},attrs:{src:t,"preview-src-list":[t]}})}))],2)],1)],1)]],2)],1)},o=[],s=a(1061),n=a(2269),c=a.n(n),l={name:"exportPdf",components:{},props:{},computed:{},filters:{},watch:{},data(){return{controlsRecord:[],safetyMeasureRecord:[],imgUrl:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",imageList:[]}},methods:{exportPdf(){(0,s.dG)().then((t=>{this.imageList=t.data.data.imgUrl,this.controlsRecord=t.data.data.controlsRecord,this.safetyMeasureRecord=t.data.data.safetyMeasureRecord}))},onExport(){const t=this.$refs.imageWrapper.offsetWidth,e=this.$refs.imageWrapper.offsetHeight,a=[t,e];c()(this.$refs.imageWrapper,{useCORS:!0,logging:!0}).then((t=>{const e=t.toDataURL("image/png",1);this.download(e,a)}))},download(t,e){this.getUrlBase64(t,e).then((t=>{const e=document.createElement("a");e.href=t,e.download="exportToJpg.jpg",e.click()}))},getUrlBase64(t,e){return new Promise((a=>{let r=document.createElement("canvas");const o=r.getContext("2d"),s=new Image;s.crossOrigin="*",s.src=t,s.onload=()=>{r.height=e[1],r.width=e[0],o.drawImage(s,0,0,e[0],e[1]);const t=r.toDataURL("image/png");r=null,a(t)}}))}},created(){this.exportPdf()},mounted(){}},i=l,p=a(3736),u=(0,p.Z)(i,r,o,!1,null,"0fd6f7d6",null),d=u.exports},1061:function(t,e,a){a.d(e,{dG:function(){return u},EV:function(){return m},Fl:function(){return f},SI:function(){return p},vd:function(){return d},qM:function(){return i},EK:function(){return l}});var r=a(4161);const o=r.Z.create({timeout:5e3});r.Z.defaults.headers["Content-Type"]="application/json;charset=utf-8",o.interceptors.request.use((t=>t)),o.interceptors.request.eject((t=>t)),o.interceptors.response.use((t=>t)),o.interceptors.response.eject((t=>t));var s=o;const n="https://www.fastmock.site/mock/c25e396c1d2ef07e8f1fc0acf0adc1a5/vue-helper",c="https://www.fastmock.site/mock/f10cad4615c38b76aa9ee7e5030157e5/vue-tools";function l(){return s({url:n+"/api/facility-base/safety-commitment-config",method:"get"})}const i=t=>s({url:n+"/api/facility-base/safety-commitment-config/"+t,method:"get"});function p(){return s({url:n+"/api/hazardClassify/tree",method:"get"})}function u(){return s({url:n+"/api/exportPdf",method:"get"})}function d(){return s({url:n+"/mockTable",method:"get"})}function m(t){return s({url:"https://restapi.amap.com/v3/weather/weatherInfo",method:"get",params:{key:"e3d4cbac03e5c2a465ab04b682ca005f",city:t,extensions:null,output:null}})}function f(){return s({url:c+"/getAreaCount",method:"get"})}},632:function(t,e,a){t.exports=a.p+"img/headPic.2b42733c.jpg"}}]);
//# sourceMappingURL=119.5f292018.js.map