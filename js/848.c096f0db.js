"use strict";(self["webpackChunkvuetools"]=self["webpackChunkvuetools"]||[]).push([[848],{50848:function(t,i,e){e.r(i),e.d(i,{default:function(){return L}});var o=function(){var t=this,i=t._self._c;return i("backHomeBtn",[[t.resultPosition[0].lat?i("span",[t._v(" 坐标： "+t._s(t.resultPosition[0].lng)+" ，"+t._s(t.resultPosition[0].lat)+" ")]):t._e(),i("el-button",{attrs:{size:"small"},on:{click:t.openMap}},[t._v(" 开始定位")]),i("getPointDialog",{ref:"getPointDialog",on:{backData:t.getMapPoint}})]],2)},n=[],a=function(){var t=this,i=t._self._c;return t.visible?i("div",{staticClass:"add--user"},[i("el-dialog",{staticClass:"my-dialog-map-mark",attrs:{visible:t.visible,"before-close":t.hideDialog,"modal-append-to-body":!1,"close-on-click-modal":!1,"append-to-body":"",width:"1200px",title:"点位选择"},on:{"update:visible":function(i){t.visible=i}}},[i("div",{staticClass:"map-box",attrs:{id:"MarkMapDiv"}}),i("div",{staticClass:"footer"},[0===t.mapPointArr.length?i("el-button",{attrs:{size:"small",round:"",type:"primary",icon:"el-icon-location-information"},on:{click:t.markPoint}},[t._v("开始打点 ")]):t._e(),t.mapPointArr.length>0?i("el-button",{attrs:{size:"small",round:"",type:"primary",icon:"el-icon-delete-locationn"},on:{click:t.clearPoint}},[t._v("清除点 ")]):t._e(),i("el-button",{attrs:{size:"small",round:"",icon:"el-icon-close"},on:{click:t.close}},[t._v("关闭")]),i("el-button",{attrs:{size:"small",round:"",type:"primary",icon:"el-icon-finished"},on:{click:t.save}},[t._v("保存")])],1)])],1):t._e()},s=[];e(57658);let l;const r=3,c=[];var p={name:"mapMarkers1",components:{},props:{},computed:{},filters:{},watch:{},data(){return{arr:[],visible:!1,mapPointArr:[],img_nj:"",img_jzs:"",index:0}},methods:{markPoint(){if(this.mapPointArr>0)return!1;c[this.index]&&c[this.index].close(),c[this.index]=new T.MarkTool(l,{follow:!0}),c[this.index].open(),c[this.index].addEventListener("mouseup",(t=>{console.log(t),this.mapPointArr.push(t.currentLnglat)}))},clearPoint(){this.mapPointArr=[],l.clearOverLays(),this.setMapImg()},hideDialog(){this.close()},showDialog(t){console.log(this.mapPointArr),this.mapPointArr=t||[],this.visible=!0,this.$nextTick((()=>{this.showMap()})),null===this.mapPointArr[0].lat&&(this.mapPointArr.length=0)},showMap(){const t="http://t0.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk=4c3a4b8cec3d4af47a12cdd192ce35cb",i=new T.TileLayer(t,{minZoom:1,maxZoom:18});l=new T.Map("MarkMapDiv",{layers:[i]}),console.log(l),l.centerAndZoom(new T.LngLat(104.55,22.9),r);const e=[{title:"",icon:" http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png",layer:TMAP_SATELLITE_MAP},{title:"",icon:"http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png",layer:TMAP_NORMAL_MAP}],o=new T.Control.MapType(e);l.addControl(o),l.addEventListener("maptypechange",(t=>{console.log(t),"TMAP_NORMAL_MAP"==t.mapType.name?(this.img_nj.hide(),this.img_jzs.hide()):(this.img_nj.show(),this.img_jzs.show())})),this.setMapImg(),this.mapPointArr&&this.mapPointArr.forEach((t=>{const i=new T.Marker(new T.LngLat(t.lng,t.lat));l.addOverLay(i)}));const n={showLabel:!0,color:"#f14343",weight:2,opacity:1,fillColor:"#f14343",fillOpacity:.2};new T.PolygonTool(l,n)},setMapImg(){const t=new T.LngLatBounds(new T.LngLat(104.5548,22.8871),new T.LngLat(104.5648,22.8924));this.img_jzs=new T.ImageOverlay("map/img/map-s-jzs.png",t,{opacity:1,alt:""}),l.addOverLay(this.img_jzs);const i=new T.LngLatBounds(new T.LngLat(104.5573,22.8752),new T.LngLat(104.5773,22.8856));this.img_nj=new T.ImageOverlay("map/img/map-s-nj.png",i,{opacity:1,alt:""}),l.addOverLay(this.img_nj)},close(){this.visible=!1},save(){const t=this.mapPointArr;console.log(t),this.$emit("backData",t),this.hideDialog()}},created(){},mounted(){}},m=p,g=e(1001),h=(0,g.Z)(m,a,s,!1,null,"449cb4aa",null),d=h.exports,u={name:"tdMapMakePoint",components:{getPointDialog:d},props:{},data(){return{resultPosition:[{lat:null,lng:null}]}},methods:{openMap(){this.$refs.getPointDialog.showDialog(this.resultPosition)},getMapPoint(t){t.length>0?(this.$set(this.resultPosition[0],"lat",t[0].lat.toString()),this.$set(this.resultPosition[0],"lng",t[0].lng.toString())):this.resultPosition=[],console.log(this.resultPosition,157)}},created(){},mounted(){}},v=u,P=(0,g.Z)(v,o,n,!1,null,"78fd77c3",null),L=P.exports}}]);
//# sourceMappingURL=848.c096f0db.js.map